% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cluster_carac_quali.R
\name{cluster_carac_quali}
\alias{cluster_carac_quali}
\title{Characterize categorical variables by class}
\usage{
cluster_carac_quali(
  dtf,
  classc,
  alpha = 0.05,
  wt = NULL,
  na_class = TRUE,
  na_categ = TRUE,
  extra_info = TRUE
)
}
\arguments{
\item{dtf}{A data.frame/tibble of qualitative predictors variables (columns).}

\item{classc}{A vector of class labels, length \code{nrow(dtf)}.}

\item{alpha}{Significance level in (0,1) used to derive the test value cutoff.}

\item{wt}{Optional numeric vector of weights, length \code{nrow(dtf)}.}

\item{na_class}{Logical; if TRUE, values with NA in \code{classc} are dropped; if FALSE, NA values are considered a new cluster or clasification. By default is TRUE.}

\item{na_categ}{Logical; if TRUE, values with NA in any qualitative predictor variable are dropped. if FALSE, NA values are considered a new category. By default is TRUE.}

\item{extra_info}{Logical; if FALSE, drops internal counts and renames \code{nj} to \code{weight} in the output.}
}
\value{
A tibble with columns:
\itemize{
\item \code{class}: cluster or classification.
\item \code{variable}: qualitative variables.
\item \code{category}: categories from qualitative variables.
\item \code{statistic}: Value test statistic (signed z-score).
\item \code{p_value}: p-value associated with the statistic.
\item \code{clas_cat}: proportion of the category belonging to the class (njk/nj).
\item \code{cat_clas}: proportion of the class made of that category (njk/nk).
\item \code{global}: global proportion of the category (nj/n).
\item \code{n}: total weighted count, it could vary if NA options are TRUE.
\item \code{nj}: weighted count for the category.
\item \code{nk}: weighted count for the class (cluster or classification).
\item \code{njk}: weighted count for the category-class combination.
}
When \code{extra_info = FALSE}, returns without \code{nk}, \code{njk}, \code{n} and with \code{weight} (renamed from \code{nj}).
}
\description{
Computes enrichment metrics (statistics, p-value) acording with Hypergeometric Distribution for each cluster or classification,
getting the most relevant categories from qualitative variables, optionally using weights and adjusting by NAs.
}
\examples{
# Classical Titanic example (base R dataset)
titanic_df <- as.data.frame(Titanic) |>
  tidyr::uncount(Freq)
titanic_dtf    <- titanic_df |> dplyr::select(Class, Sex, Age)
titanic_classc <- titanic_df$Survived
titanic_wt     <- titanic_df$Freq
cluster_carac_quali(titanic_dtf, titanic_classc, wt = titanic_wt, alpha = 0.05)

}
\references{
Lebart, L. and Morineau, A. and Piron, M. (1995) Statisitique exploratoire multidimensionnelle, Paris.
Pardo C, Del Campo P (2007). "Combinación de métodos factoriales y de análisis de conglomerados en R: el paquete FactoClass." Revista Colombiana de Estadística, 30(2), 231-245.
}
\author{
Pedro Cesar Del Campo Neira (\email{pcdelcampon@gmail.com})
}
